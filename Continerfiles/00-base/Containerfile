FROM alpine as installer

RUN apk update && apk --no-cache add \
    bash \
    bash-completion \
    bind-tools \
    ca-certificates \
    curl \
    git \
    gzip \
    htop \
    jq \
    libc6-compat \
    micro \
    nano \
    openssh-client \
    sudo \
    tar \
    tree \
    tzdata

COPY overlay /

FROM scratch as final

ARG ARCH=amd64
ARG VERSION=amd64

LABEL org.opencontainers.image.authors="Sentinel Developers"
LABEL org.opencontainers.image.title="Sentinel OS"
LABEL org.opencontainers.image.description="Sentinel OS Base Image"
LABEL org.opencontainers.image.arch="${ARCH}"
LABEL org.opencontainers.image.version="${VERSION}"
LABEL org.opencontainers.image.source="https://github.com/sentinelos/base"
LABEL org.opencontainers.image.licenses="MIT"

ENV PS1="\@ \u@\h \w$ "
ENV EDITOR="nano"

WORKDIR /app

COPY --from=installer /  /

CMD ["bash"]
